---
import Layout from '../layouts/Layout.astro';
import TimetableSelector from '../components/TimetableSelector.astro';
import timetableData from '../data/timetable.json';

const sheets = Object.keys(timetableData).sort();
const classesBySheet: { [key: string]: string[] } = {};

Object.entries(timetableData).forEach(([sheetName, sheetData]) => {
  classesBySheet[sheetName] = Object.keys(sheetData as any).sort();
});
---

<Layout title="University Timetable Generator">
  <div class="text-center mb-8">
    <h1 class="text-4xl md:text-5xl font-bold text-green-400 mb-4">
      ðŸŽ“ University Timetable Generator
    </h1>
    <p class="text-gray-300 text-lg md:text-xl max-w-2xl mx-auto">
      Select your branch category and section to view your personalized timetable
    </p>
  </div>

  <TimetableSelector sheets={sheets} classesBySheet={classesBySheet} />

  <div class="mt-12 max-w-3xl mx-auto">
    <div class="bg-gradient-to-r from-green-900 to-blue-900 border border-green-700 rounded-lg p-6">
      <h2 class="text-xl font-bold text-green-300 mb-3">ðŸ“¢ Latest Updates</h2>
      <ul class="space-y-2 text-green-100">
        <li>ðŸ“… Timetable for 2024-25 (EVEN SEM) is updated!</li>
        <li>ðŸ†• New Features: Save as PNG or PDF</li>
        <li>ðŸ’¾ Save your favorite timetables for quick access</li>
      </ul>
    </div>
  </div>
</Layout>